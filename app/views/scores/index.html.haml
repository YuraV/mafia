%ul.nav.nav-tabs
  %li
    = link_to 'Games',games_path
  %li.active
    = link_to 'Scores', scores_path
%table.table.table-striped.table-bordered.bordered.zebra

  %thead
    %tr
      %th
        ID
      %th
        Name
      %th
        Played
      %th
        Won
      %th
        Won Red
      %th
        Won Black
      %th
        Points
      %th
        Rate
      

    - User.all.each do |user|
      - red = Appointment.where(user_id: user.id, team: 'red').count(:conditions => 'won' == true)
      - black = Appointment.where(user_id: user.id, team: 'black').count(:conditions => 'won' == true)
      - points = Appointment.where(user_id: user.id).sum(:score)
      - games = Appointment.where(user_id: user.id).count()
      %tr
        %td
          = user.id
        %td
          = user.alias
        %td
          = games
        %td
          = red + black
        %td.red
          = red
        %td.maf
          = black
        %td
          = points
        %td 

          -if games != 0 
            = "#{points/games.to_f}"